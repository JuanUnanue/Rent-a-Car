<div *ngIf="isLoading" class="text-center mt-5">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
</div>

<div *ngIf="!isLoading" class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Tarjeta del formulario -->
      <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
          <h2 class="text-center">Editar Cliente</h2>
        </div>
        <div class="card-body">
          <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Email (Usuario)</label>
              <input 
                type="email" 
                class="form-control" 
                id="email" 
                formControlName="email"
                [ngClass]="{'is-invalid': clientForm.get('email')?.invalid && clientForm.get('email')?.touched}"
              >
              <div class="invalid-feedback">
                <div *ngIf="clientForm.get('email')?.errors?.['required']">El email es requerido</div>
                <div *ngIf="clientForm.get('email')?.errors?.['email']">Ingrese un email válido</div>
              </div>
            </div>

            <!-- Nombre -->
            <div class="mb-3">
              <label for="firstName" class="form-label">Nombre</label>
              <input 
                type="text" 
                class="form-control" 
                id="firstName" 
                formControlName="firstName"
                [ngClass]="{'is-invalid': clientForm.get('firstName')?.invalid && clientForm.get('firstName')?.touched}"
              >
              <div class="invalid-feedback">
                El nombre es requerido
              </div>
            </div>

            <!-- Apellido -->
            <div class="mb-3">
              <label for="lastName" class="form-label">Apellido</label>
              <input 
                type="text" 
                class="form-control" 
                id="lastName" 
                formControlName="lastName"
                [ngClass]="{'is-invalid': clientForm.get('lastName')?.invalid && clientForm.get('lastName')?.touched}"
              >
              <div class="invalid-feedback">
                El apellido es requerido
              </div>
            </div>

            <!-- Teléfono -->
            <div class="mb-3">
              <label for="phone" class="form-label">Teléfono</label>
              <input 
                type="tel" 
                class="form-control" 
                id="phone" 
                formControlName="phone"
                [ngClass]="{'is-invalid': clientForm.get('phone')?.invalid && clientForm.get('phone')?.touched}"
              >
              <div class="invalid-feedback">
                El teléfono es requerido
              </div>
            </div>

            <!-- Dirección -->
            <div class="mb-3">
              <label for="address" class="form-label">Dirección</label>
              <textarea 
                class="form-control" 
                id="address" 
                formControlName="address"
                [ngClass]="{'is-invalid': clientForm.get('address')?.invalid && clientForm.get('address')?.touched}"
              ></textarea>
              <div class="invalid-feedback">
                La dirección es requerida
              </div>
            </div>

            <!-- Fecha de Nacimiento -->
            <div class="mb-3">
              <label for="dateOfBirth" class="form-label">Fecha de Nacimiento</label>
              <input 
                type="date" 
                class="form-control" 
                id="dateOfBirth" 
                formControlName="dateOfBirth"
                [ngClass]="{'is-invalid': clientForm.get('dateOfBirth')?.invalid && clientForm.get('dateOfBirth')?.touched}"
              >
              <div class="invalid-feedback">
                La fecha de nacimiento es requerida
              </div>
            </div>

            <!-- Botones -->
            <div class="d-flex justify-content-between mt-4">
              <button type="button" class="btn btn-secondary" (click)="onCancel()">
                Cancelar
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="!clientForm.valid">
                Guardar Cliente
              </button>
              <div class="text-end mt-3">
                <button type="button" class="btn btn-outline-danger" (click)="goToChangePassword()">
                  Cambiar Contraseña
               </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
